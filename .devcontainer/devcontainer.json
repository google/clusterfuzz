// Copyright 2025 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

{
	"name": "ClusterFuzz Noble Python 3.11",
	"build": {
		"dockerfile": "Dockerfile",
		"context": ".."
	},

	"customizations": {
		"vscode": {
			"settings": {
				"python.defaultInterpreterPath": "/usr/bin/python3.11",
				"python.analysis.extraPaths": ["/workspace/src/python"],
				"python.linting.enabled": true,
				"python.formatting.provider": "yapf"
			},
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance"
			]
		}
	},

	// Run commands after the container is created.
	// Since install_deps.bash might not be present or could fail,
	// we will only attempt to install if it's there.
	"postCreateCommand": "if [ -f \"./local/install_deps.bash\" ]; then ./local/install_deps.bash; fi",

	// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
	"remoteUser": "vscode"
}
